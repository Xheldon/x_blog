<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <title>我的家庭观影之路 - Xheldon Blog</title>
    
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="google-site-verification" content="EX6ES0UVArXTvp5aeeWrkXGn5M5MZ10bYqXanXDEzAs" />
    <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
    
        <meta name="description" content="为家人实现观影自由，也是一种幸福。">
    
    <meta name="keywords"  content="Xheldon, 生活, 美食, 旅游, 前端, 技术, 分享">
    <meta name="theme-color" content="#000000">
    <meta name="twitter:card" content="summary_large_image">
    <!-- Open Graph -->
    <meta property="og:title" content="我的家庭观影之路 - Xheldon Blog">
    
    <meta property="og:type" content="article">
    
    <meta property="article:published_time" content="2022-04-24T00:57:15Z">
    
    
    
    <meta property="article:tag" content="生活">
    
    <meta property="article:tag" content="Apple">
    
    <meta property="article:tag" content="折腾">
    
    <meta property="article:tag" content="软路由">
    
    <meta property="article:tag" content="自由">
    
    
    
        <meta name="og:description" content="为家人实现观影自由，也是一种幸福。">
    
    
    <meta property="twitter:image" content="https://static.xheldon.cn/img/in-post/2022/the-way-to-watching-tv/photo-1440404653325-ab127d49abc1.webp">
    <meta property="og:image" content="https://static.xheldon.cn/img/in-post/2022/the-way-to-watching-tv/photo-1440404653325-ab127d49abc1.webp">
    
    <meta property="og:url" content="https://www.xheldon.com/life/the-way-to-watching-tv.html">
    <meta property="og:site_name" content="Xheldon Blog">
    
    <!-- Web App Manifest -->
    <link rel="manifest" href="/pwa/manifest.json">

    <!-- Favicon -->
    <link rel="shortcut icon" href="/resources/img/favicon.ico">
    
    <!-- Canonical URL -->
    <link rel="canonical" href="https://www.xheldon.com/life/the-way-to-watching-tv.html">

    <!-- Bootstrap Core CSS -->
    <link rel="stylesheet" href="https://static.xheldon.cn/css/bootstrap.min.css">

    <!-- Custom CSS -->
    <link rel="stylesheet" href="https://static.xheldon.cn/css/xheldon-life-blog.min.css">

    <!-- Custom Fonts -->
    <!-- <link href="http://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css" rel="stylesheet" type="text/css"> -->
    <link href="https://static.xheldon.cn/css/font-awesome.min.css" rel="stylesheet" type="text/css">


    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->
</head>

<!-- hack iOS CSS :active style -->
<body ontouchstart="">

    <!-- Navigation -->

    <nav class="navbar navbar-default navbar-custom navbar-fixed-top">
        
        <div class="container-fluid">
            <!-- Brand and toggle get grouped for better mobile display -->
            <div class="navbar-header page-scroll">
                <button type="button" class="navbar-toggle">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href="/">
                    Xheldon Blog
                </a>
            </div>

            <!-- Collect the nav links, forms, and other content for toggling -->
            <div id="xheldonblog_navbar">
                <div class="navbar-collapse">
                    <ul class="nav navbar-nav navbar-right">
                        <li><a href="/">Home</a></li>
                        <li>
                            <a href="/about/">About</a>
                        </li>
                        <li>
                            <a href="/donate/">Donate</a>
                        </li>
                        <li>
                            <a href="/archive/">Archive</a>
                        </li>
                        <li>
                            <a href="/feed.xml">Rss</a>
                        </li>
                        <li class="search-icon">
                            <a href="javascript:void(0)">
                                <i class="fa fa-search"></i>
                            </a>
                        </li>
                    </ul>
                </div>
            </div>
            <!-- /.navbar-collapse -->
        </div>
        <!-- /.container -->
    </nav>

    <script>
        // Drop Bootstarp low-performance Navbar
        // Use customize navbar with high-quality material design animation
        // in high-perf jank-free CSS3 implementation
        var $body = document.body;
        var $toggle = document.querySelector('.navbar-toggle');
        var $navbar = document.querySelector('#xheldonblog_navbar');
        var $collapse = document.querySelector('.navbar-collapse');

        var __XheldonNav__ = {
            close: function () {
                $navbar.className = " ";
                // wait until animation end.
                setTimeout(function () {
                    // prevent frequently toggle
                    if ($navbar.className.indexOf('in') < 0) {
                        $collapse.style.height = "0px"
                    }
                }, 400)
            },
            open: function () {
                $collapse.style.height = "auto"
                $navbar.className += " in";
            }
        }

        // Bind Event
        $toggle.addEventListener('click', function (e) {
            if ($navbar.className.indexOf('in') > 0) {
                __XheldonNav__.close()
            } else {
                __XheldonNav__.open()
            }
        })

        /**
         * Since Fastclick is used to delegate 'touchstart' globally
         * to hack 300ms delay in iOS by performing a fake 'click',
         * Using 'e.stopPropagation' to stop 'touchstart' event from 
         * $toggle/$collapse will break global delegation.
         * 
         * Instead, we use a 'e.target' filter to prevent handler
         * added to document close XheldonNav.  
         *
         * Also, we use 'click' instead of 'touchstart' as compromise
         */
        document.addEventListener('click', function (e) {
            if (e.target == $toggle) return;
            if (e.target.className == 'icon-bar') return;
            __XheldonNav__.close();
        })
    </script>
    <!-- Search -->
<div class="search-page">
  <div class="search-icon-close-container">
    <span class="search-icon-close">
      <i class="fa fa-chevron-down"></i>
    </span>
  </div>
  <div class="search-main container">
    <div class="row">
      <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
        <form></form>
        <input type="text" id="search-input" placeholder="$ grep...">
        </form>
        <div id="search-results" class="mini-post-list"></div>
      </div>
    </div>
  </div>
</div>

    <!-- Image to hack wechat -->
<!-- <img src="/resources/img/icon_wechat.png" width="0" height="0"> -->
<!-- <img src="/img/in-post/2022/the-way-to-watching-tv/photo-1440404653325-ab127d49abc1.webp" width="0" height="0"> -->

<!-- Post Header -->



<style type="text/css">
    header.intro-header{
        position: relative;
        background-image: url('https://static.xheldon.cn/img/in-post/2022/the-way-to-watching-tv/photo-1440404653325-ab127d49abc1.webp');
        
    }

    
    header.intro-header .header-mask{
        width: 100%;
        height: 100%;
        position: absolute;
        background: rgba(0,0,0, 0.4);
    }
    
</style>

<header class="intro-header" >

    <div class="header-mask"></div>
    
    <div class="header-img-credit">
        Image by <a href="https://unsplash.com/@imnoom?utm_source=xheldon_blog&utm_medium=referral" target="_blank">Noom Peerapong / Unsplash</a>
    </div>
    
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <div class="post-heading">
                    <div class="tags">
                        
                        <a class="tag" href="/archive/?tag=%E7%94%9F%E6%B4%BB" title="生活">生活</a>
                        
                        <a class="tag" href="/archive/?tag=Apple" title="Apple">Apple</a>
                        
                        <a class="tag" href="/archive/?tag=%E6%8A%98%E8%85%BE" title="折腾">折腾</a>
                        
                        <a class="tag" href="/archive/?tag=%E8%BD%AF%E8%B7%AF%E7%94%B1" title="软路由">软路由</a>
                        
                        <a class="tag" href="/archive/?tag=%E8%87%AA%E7%94%B1" title="自由">自由</a>
                        
                    </div>
                    <h1>我的家庭观影之路</h1>
                    
                    <h2 class="subheading"></h2>
                    <span class="meta">✍🏼 写于 2022年04月24日</span>&nbsp;&nbsp;&nbsp;  
                    
                    <span class="meta">💡 更新于 2023年01月05日</span>
                    
                </div>
            </div>
        </div>
    </div>
</header>






<!-- Post Content -->
<article>
    <div class="container">
        <div class="row">

    <!-- Post Container -->
            <div class="
                col-lg-8 col-lg-offset-2
                col-md-10 col-md-offset-1
                post-container">

                <!-- Multi-Lingual -->
                
                
                
                    <div class="callout-tips">🖥 &nbsp;说明：为家人实现观影自由，也是一种幸福。</div>
                
                
                    <div class="craft-tips">📚 &nbsp;本文同步发布在 Craft：<a href="https://www.craft.do/s/zRTAMsyWRqPewN" target="_blank">https://www.craft.do/s/zRTAMsyWRqPewN</a></div>
                
				<h2 id="前言">前言</h2>

<p>看电视是家里必不可少的娱乐活动，但是如何舒服的看自己想看的内容却不是一件简单的事，有时候甚至有钱都买不来舒心，更别提诸如会员专属广告、会员还需要额外购买观影券来看当前热播的剧等喂屎行为。于是此处记录一下有关家庭观影的折腾记录，一来可以给大家一个思路，二来可以帮助大家提高生活质量。</p>

<h2 id="我的基本情况">我的基本情况</h2>

<p>这里先介绍一下我的基本情况，如果情况和你相符的话可以继续看下去；如果与你的需求不甚吻合，也可以继续看下去做个参考。</p>

<h3 id="设备">设备</h3>

<ul>
  <li>
    <p>索尼 65X90J 电视作为播放设备，京东 618 买的，￥6000+，实际任意电视均可。</p>
  </li>
  <li>
    <p>Apple TV 4K 2021 款作为附属播放设备，京东国际买的 ￥1300，Infuse 只在苹果平台有，直接在电脑上播放也行。</p>
  </li>
  <li>
    <p>联通宽带送的普通 ZTE WiFi6 路由器作为主路由，免费。</p>
  </li>
  <li>
    <p>NanoPi R4S 作为<a href="https://baike.baidu.com/item/%E8%BD%AF%E8%B7%AF%E7%94%B1/4824918">软路由</a>，OpenWrt 系统，淘宝买的 ￥500左右，其他软路由系统/硬件均可。</p>
  </li>
  <li>
    <p><a href="https://firecore.com/infuse">Infuse Pro 订阅</a> 软件做为播放客户端，Apple 美区买的，订阅一年 ￥70 左右，其他支持 WebDAV 等协议的播放软件均可。</p>
  </li>
  <li>
    <p>联通宽带作为基础设施。</p>
  </li>
</ul>

<blockquote>
  <p>注：我的 R4S 的连接方式是 <a href="https://sspai.com/post/59708">旁路由</a> 方式，这样家里一些无需特殊上网的设备就不会异常，比如家里的 360监控摄像头、华为智能灯、小米晾衣架、小天鹅智能洗衣机等，这些智障硬件在家里网络特殊的情况下，无法连接网络，尤其是 360监控摄像头。因此这些设备必须直连，所以只能使用旁路由的方式，大部分的设备默认走直连，少部分设备特殊配置后走特殊网络即可。</p>
</blockquote>

<h3 id="需求">需求</h3>

<ol>
  <li>
    <p>吃饭的时候看央视新闻等电视直播。</p>
  </li>
  <li>
    <p>看老旧的美剧、英剧如《老友记》、《权利的游戏》，对新出的美剧不感兴趣，不追剧。</p>
  </li>
  <li>
    <p>看会被阿里网盘和百度网盘和谐的电影/电视剧，比如当下正在影院放映的电影、流媒体正在热播的电视剧、爱国敬业诚信友善的电影等。</p>
  </li>
  <li>
    <p>无聊的时候就想听个响，随便放点动画什么的如《猫和老鼠》、《哆啦A梦》、《蜡笔小新》等每集独立的电视节目等。</p>
  </li>
  <li>
    <p>看一些蓝光画质的纪录片。</p>
  </li>
  <li>
    <p>流畅播放不能卡。</p>
  </li>
  <li>
    <p>设置一次之后，后续不需要再操心，喜欢稳定和一劳永逸。</p>
  </li>
  <li>
    <p>不想到处找资源下载电影/电视剧，又怕电脑下载迅雷等 BT 下载，会对 SSD 固态硬盘有损害。</p>
  </li>
  <li>
    <p>对电脑软件有洁癖，能不装尽量不装新软件，如果一个软件能解决的，不会装两个；即使装软件，也尽可能的不影响电脑的环境（此处特指从 Github 上下载的软件），因此优先考虑 <a href="https://www.docker.com/get-started/#">Docker</a> 安装。</p>
  </li>
</ol>

<blockquote>
  <p>注：有些人喜欢自动化，比如使用 Sonarr + Jackett + qBittorrent ，设置好之后就可以实现自动追剧，即剧集有更新后自动下载，全程不用手动，但是我的需求没这么强烈，因为我看的大多数剧集大多数都是能通过阿里云盘转存看的国内的剧集，比如一些CCTV 的纪录片和常见的国外剧集如一些 BBC 的纪录片、老友记之类的。因此我没有使用此自动化方案，一来是因为需要额外购买大容量硬盘，二来是因为我主力看电影途径还是通过阿里云盘进行的。</p>
</blockquote>

<h2 id="前期的无效折腾">前期的无效折腾</h2>

<p>想了想，为了避免大家少走弯路，这里还是放上我走过的弯路，给大家个经验教训。如果对此不感兴趣，直接跳到下一节即可。</p>

<h3 id="emby">Emby</h3>

<p>一开始的时候，鉴于画面优美性、配置简便性，我想使用 <a href="https://post.smzdm.com/p/735222/">Emby 服务</a>，但是市面上的公共的、收费的此类服务，要么是需要特定方式连接，要么是需要特定方式使用（如定时签到、按时回答问题等），最头痛的是此类服务的速度非常差，尤其是看那种蓝光高清的电影，动不动 20G+ 容量起步的时候；或者是晚上观看高峰期，服务质量会非常恶劣。再加上其他的问题如 infuse 客户端会进行扫库操作（当然这个不是 Emby 的锅），因此在我 <a href="https://www.xheldon.com/life/apple-tv-using-and-problem.html#:~:text=infuse%20%E9%A6%96%E6%AC%A1%E4%BD%BF%E7%94%A8%E6%97%B6%EF%BC%8C%E7%99%BB%E9%99%86%E5%AE%8C%20Emby%20%E6%9C%8D%E5%8A%A1%E5%90%8E">折腾了一次</a> 之后就放弃了此种方案。</p>

<h3 id="iptv">IPTV</h3>

<p>想观看一些各个地方的电视台的直播，于是想到可以使用 <a href="https://baike.baidu.com/item/iptv/113036">IPTV</a>，一般办宽带时候，运营商会有介绍其各自提供的 IPTV 服务，只是运营商的需要额外收费，我用的是免费的。如何免费呢？首先需要下载一个客户端，我用的是 iPlay TV for Apple TV，5.99 美元。然后在 Github 上搜一些直播源的地址填进去（页面 README 会有些怎么使用这些地址），这些地址都是好心人从网络上抓取的运营商的 IPTV 地址。</p>

<p>但是这个方案的坏处是，直播源是不稳定的，时不时的你就需要手动更新地址，或者地址里面的某个播放源就无效了，经历过几次之后就很头痛，于是后续的看央视直播，我都是要么手机投屏，要么就是用安卓电视安装的 新视听 app 看央视直播。</p>

<h2 id="当前方案">当前方案</h2>

<blockquote>
  <p>注意，下面的所有设置的基础的前提是，家里的设备如 Apple TV、 R4S 、Mac 都在同一个网段，否则无法相互识别。我目前的网段地址是 <code class="language-plaintext highlighter-rouge">192.168.7.x</code> ，比如 R4S 位于 <code class="language-plaintext highlighter-rouge">192.168.7.2</code> 主路由位于 <code class="language-plaintext highlighter-rouge">192.168.7.1</code> ，从一个路由出来的都是在同一个网段，因此此处无需特别关心，此处只是提醒一下，如果总是设置不对，可能有这方面的原因。</p>
</blockquote>

<ol>
  <li>
    <p>配合 R4S，通过阿里云盘提供的<a href="https://baike.baidu.com/item/WebDAV/4610909?fr=aladdin"> WebDAV 协议</a>，使用 Infuse 进行电影观看，只需要网上搜索想看的电影名 + 阿里云盘 转存即可，高阶一点的，电视剧的话搜 电视剧名 + 阿里云盘 + 刮削（意即整理好剧集名和海报、演员表、每季的海报介绍等各种信息了，可以直接在 Infuse 上以电视剧的形式查看）。</p>
  </li>
  <li>
    <p>配合 R4S，通过 qBittorrent 配合 Jackett 搜索插件和软路由的外接硬盘，实现将电影下载到外接硬盘上观看，这样也不会损害电脑的 SSD，同时也不用在电脑上多下一个软件等，此途径是为了弥补上面阿里云盘因为一些原因而被和谐的电影的一种方案。</p>
  </li>
</ol>

<p caption="Image"><img src="https://static.xheldon.cn/img/in-post/2022/the-way-to-watching-tv/869A0533-9AE7-463E-9664-D9A61AD17D47_2.webp" alt="Image" title="Image" /></p>

<h2 id="具体实践">具体实践</h2>

<blockquote>
  <p>下面说的全部 R4S 软路由的插件，都是购买的时候商家已经给刷好的系统，可以让商家帮忙刷，无需自己手动安装。</p>
</blockquote>

<h3 id="阿里云盘">阿里云盘</h3>

<p>使用 R4S 的阿里云盘插件 <code class="language-plaintext highlighter-rouge">阿里云盘 WebDAV</code> ，<a href="https://github.com/messense/aliyundrive-webdav">项目地址</a>：</p>

<p caption="Image"><img src="https://static.xheldon.cn/img/in-post/2022/the-way-to-watching-tv/FAD4964F-C3B3-4DA1-8E22-59CC9F206DE8_2.webp" alt="Image" title="Image" /></p>

<p>插件装好后非常简单配置一下即可，主要是两个配置，一个是 <code class="language-plaintext highlighter-rouge">Refresh Token</code> 这个需要使用 Chrome 手动打开阿里云盘的 Web 页面，按 <code class="language-plaintext highlighter-rouge">cmd</code> + <code class="language-plaintext highlighter-rouge">opt</code> + <code class="language-plaintext highlighter-rouge">i</code> 打开控制台，然后在 <code class="language-plaintext highlighter-rouge">Application</code> Tab 中，点击左侧的 <code class="language-plaintext highlighter-rouge">Local Storage</code> 查找 <code class="language-plaintext highlighter-rouge">token</code> 这个键，在下方的值中找到 <code class="language-plaintext highlighter-rouge">refresh_token</code> 的值，粘贴到上图中即可：</p>

<p caption="Image"><img src="https://static.xheldon.cn/img/in-post/2022/the-way-to-watching-tv/A081D0DA-BD8E-4440-8E88-304941A8182C_2.webp" alt="Image" title="Image" /></p>

<blockquote>
  <p>注：这个 refresh_token 顾名思义，是用来获取真正 token 的值，我看过其代码，其逻辑是每 117 分钟重新获取一次（可能 token 是 2 小时过期），否则的话 token 就会过期。因此如果 R4S 断电、网络断开之后，如果发现阿里云盘无法访问了，需要重新获取一次该 refresh_token 填入。</p>
</blockquote>

<p>端口的话，就随便写一个不会冲突的即可，我这里设置的是 <code class="language-plaintext highlighter-rouge">8982</code> ，然后勾选 <code class="language-plaintext highlighter-rouge">启用</code> 后，点击右下方的保存并应用，即配置完毕。此时你可以直接使用浏览器访问（假设家里路由器地址是 <code class="language-plaintext highlighter-rouge">192.168.7.2:8982</code> ）：</p>

<p caption="Image"><img src="https://static.xheldon.cn/img/in-post/2022/the-way-to-watching-tv/C09F1F1F-4743-4F33-8400-36E0E237814F_2.webp" alt="Image" title="Image" /></p>

<p>然后再在 <code class="language-plaintext highlighter-rouge">Infuse</code>  中配置，让其识别到局域网的这个 WebDAV 服务即可，操作如下，进入设置-网络-共享-添加共享：</p>

<p caption="Image"><img src="https://static.xheldon.cn/img/in-post/2022/the-way-to-watching-tv/61069572-196F-4874-8122-BAD70096CE68_2.webp" alt="Image" title="Image" /></p>

<p>位址就是刚刚的局域网 ip 地址，下方高级中填写端口。然后进入设置-媒体库，把阿里云盘中的文件夹都打上勾，这样就可以在首页看到文件夹了，记住，每次如果有文件删除和新增，如果想及时看到的话，都需要执行一次打勾/取消打勾的操作：</p>

<p caption="Image"><img src="https://static.xheldon.cn/img/in-post/2022/the-way-to-watching-tv/C12D97E3-66AB-41F5-B1CF-559752C3B721_2.webp" alt="Image" title="Image" /></p>

<p>首页视图：</p>

<p caption="压缩"><img src="https://static.xheldon.cn/img/in-post/2022/the-way-to-watching-tv/48F4102C-C6AA-4DB0-8372-8FF271EC5CF5_2.webp" alt="压缩" title="压缩" /></p>

<p>其他 Infuse 的使用可以自己发掘一下。</p>

<h3 id="qbittorrent">qBittorrent</h3>

<p>有时候阿里云盘因为一些众所周知的原因，部分资源会被和谐掉，因此为了下载一些热门剧，或者下载国外的一些剧集的话，只能采用此种方法。</p>

<p><a href="https://baike.baidu.com/item/qbittorrent/9179482">qBittorrent</a> 支持磁力下载和 BT 下载，可以直接在电脑上安装此软件，但是 BT 下载对 SSD 是有损伤的，我不想直接在新买的 Mac Studio 上使用，于是就将其放到软路由上，然后在 R4S 挂载外接硬盘使用。需要配置一下，才能在路由器上使用此软件，过程如下：</p>

<h4 id="挂载外接硬盘">挂载外接硬盘</h4>

<p>家里有一个大学时期买的 500G 的机械硬盘（磁盘分区类型建议是 <a href="https://baike.baidu.com/item/exFAT">exFAT</a>，Mac 的 APFS 不被识别，可以使用 Mac 的磁盘管理工具进行格式化），一直放在抽屉吃灰，于是拿来用了。硬盘直接插到 R4S 上可以识别，但是需要挂载，这是个 <a href="https://baike.baidu.com/item/%E6%8C%82%E8%BD%BD">计算机概念</a>，就好比是对软路由来说，有一个外接的硬件通过通用协议 USB 接入到系统中，但是并不知道接入后要如何对待这个硬件。因此此处外接硬盘后，软路由会显示一个挂载点虚拟挂载点（下方的 <code class="language-plaintext highlighter-rouge">/dev/sda</code> ），表示这个硬盘挂载到路由系统的这个路径下，然后你需要配置一下要将该挂载点映射到实际位于 <code class="language-plaintext highlighter-rouge">/mnt/</code> 物理挂载点的哪个路径，才能正确访问该路径下的该外接硬盘设备。</p>

<p>进入到 <code class="language-plaintext highlighter-rouge">系统-磁盘管理</code> ，可以看到已经设备了外接硬盘（红框指示的地方），这时需要点下方的<code class="language-plaintext highlighter-rouge">挂载点</code> 然后添加该设备即可：</p>

<p caption="SCR-20220419-w94"><img src="https://static.xheldon.cn/img/in-post/2022/the-way-to-watching-tv/7EEFE44B-F57F-4FC9-AF8A-FEB0D88B90A1_2.webp" alt="SCR-20220419-w94" title="SCR-20220419-w94" /></p>

<p>进入到 <code class="language-plaintext highlighter-rouge">系统-挂载点</code> ，如图可以看到下方有个 <code class="language-plaintext highlighter-rouge">挂载点</code> ：</p>

<blockquote>
  <p>图中我是已经挂载了，所以会有第一个红框，默认是没有的，你在下方的挂载点添加后即可在上面的 <code class="language-plaintext highlighter-rouge">已挂载的文件系统</code> 中看到。 注：Linux 外接设备挂载的路径一般都是位于 /mnt 下的，添加后注意看容量是否是外接硬盘的容量即可。因为分区的原因，虚拟挂载点 <code class="language-plaintext highlighter-rouge">/dev/sda</code> 下可以挂载的物理硬盘有两个，一个是 <code class="language-plaintext highlighter-rouge">/mnt/sda1</code> 只有几百 M，一个是 <code class="language-plaintext highlighter-rouge">/mnt/sda2</code> 才是真正的可读写硬盘。</p>
</blockquote>

<p caption="SCR-20220419-wba"><img src="https://static.xheldon.cn/img/in-post/2022/the-way-to-watching-tv/54303E2E-02EC-4EFA-8156-3356B8E458AD_2.webp" alt="SCR-20220419-wba" title="SCR-20220419-wba" /></p>

<p>之后如果你使用的是 Mac，就可以直接在 Finder 的 <code class="language-plaintext highlighter-rouge">网络</code> 中发现该设备了，因为 R4S 默认带了一个 SMB 共享的程序，即下面说的配置，如果你想更定制一点，可以修改该共享配置（不过在 R4S 中你能修改的也只有名称了）</p>

<h4 id="配置-samba-共享">配置 Samba 共享</h4>

<blockquote>
  <p>此处先配置路由器的<a href="https://baike.baidu.com/item/samba/455025"> Samba 共享</a>（也即 SMB 协议）的原因是，这样的话就不用使用 SSH 终端登陆路由器来通过命令行修改配置文件了，对小白比较友好，因此将这一步放到首位。</p>
</blockquote>

<p>浏览器进入到路由器配置页面，然后进入 <code class="language-plaintext highlighter-rouge">网络存储-网络共享</code> ， 进行如下填写，其中主机名是显示在 Finder 中的名字，描述和工作组默认就可以，可以看到默认状态下 <code class="language-plaintext highlighter-rouge">自动共享</code> 选项是打开的，也就是我上一节说的这一步其实不是很需要。但是如果默认自动共享的话，是共享的根目录，会将 <code class="language-plaintext highlighter-rouge">/mnt/sda1</code> 也显示出来，我这个强迫症一定要改掉，于是配置下方的 <code class="language-plaintext highlighter-rouge">共享目录</code> 即可：</p>

<p caption="SCR-20220419-w73"><img src="https://static.xheldon.cn/img/in-post/2022/the-way-to-watching-tv/7C7C0A2E-520C-4B00-9374-36214F11E288_2.webp" alt="SCR-20220419-w73" title="SCR-20220419-w73" /></p>

<p>此处需要注意的是，需要配置一下本页面的第二个 Tab，即 <code class="language-plaintext highlighter-rouge">编辑模板</code> 然后将需要使用密码和 security 共享类型为 User 的配置改成不需要使用密码和共享类型是 Share 即允许匿名连接，否则需要输入账号密码，麻烦：</p>

<p caption="SCR-20220419-w6i"><img src="https://static.xheldon.cn/img/in-post/2022/the-way-to-watching-tv/79FA04AC-4689-412A-8C81-EBE17EF8A0D8_2.webp" alt="SCR-20220419-w6i" title="SCR-20220419-w6i" /></p>

<p>然后点击右下角的 <code class="language-plaintext highlighter-rouge">保存并应用</code> 即可。</p>

<p>做完以后，直接在 Mac 中的 Finder-网络 就可以看到：</p>

<p caption="Image"><img src="https://static.xheldon.cn/img/in-post/2022/the-way-to-watching-tv/AD4BFF23-BC65-4601-B44B-DEAB0D0E27C6_2.webp" alt="Image" title="Image" /></p>

<p>也可以手动连接服务器，如图：</p>

<p caption="SCR-20220419-wcv"><img src="https://static.xheldon.cn/img/in-post/2022/the-way-to-watching-tv/F81F6D6A-210E-41E4-84A5-BE6F7828E555_2.webp" alt="SCR-20220419-wcv" title="SCR-20220419-wcv" /></p>

<p caption="Image"><img src="https://static.xheldon.cn/img/in-post/2022/the-way-to-watching-tv/7CF3B88C-09B8-42F8-96ED-FCDE506F539A_2.webp" alt="Image" title="Image" /></p>

<h4 id="配置-qbittorrent">配置 qBittorrent</h4>

<p>进入软路由 <code class="language-plaintext highlighter-rouge">网络存储-qBittorrent</code> 插件中，根据上面的挂载点和挂载目录为 <code class="language-plaintext highlighter-rouge">/mnt/sda2/</code> 按如下配置即可：</p>

<p caption="SCR-20220419-wdl"><img src="https://static.xheldon.cn/img/in-post/2022/the-way-to-watching-tv/A1529EB2-17DE-4825-8DB5-8EC285616B16_2.webp" alt="SCR-20220419-wdl" title="SCR-20220419-wdl" /></p>

<p>主要配置的是 配置文件存放路径 和 下载文件存放目录，改成外接硬盘的地址 <code class="language-plaintext highlighter-rouge">/mnt/sda2</code> 下面的路径即可（上图中是已经启动后的界面，未启动的话不会有 「打开 Web 页面」和「qBittorrent 运行中」的提示）。设置完成后点击保存，先不要应用，然后进入到<code class="language-plaintext highlighter-rouge">下载设置</code> tab中，将<code class="language-plaintext highlighter-rouge">启用临时目录</code> 选项关闭，否则会产生大量的临时文件：</p>

<p caption="SCR-20220419-wdu"><img src="https://static.xheldon.cn/img/in-post/2022/the-way-to-watching-tv/C64A0BF2-23FB-4F40-AB39-9757904C1010_2.webp" alt="SCR-20220419-wdu" title="SCR-20220419-wdu" /></p>

<p>然后点击保存并应用即可。</p>

<p>之后，进入到 qBittorrent 的 Web 管理界面，即路由器地址+刚刚设置的端口号 <code class="language-plaintext highlighter-rouge">192.168.7.2:9091</code> ：</p>

<p caption="Image"><img src="https://static.xheldon.cn/img/in-post/2022/the-way-to-watching-tv/5C47B593-D0D6-4B0D-BFAE-3B2CF21FAB32_2.webp" alt="Image" title="Image" /></p>

<p>至此就安装完成了，你有什么网上搜到的磁力链接或者 torrent 种子都可以进行下载。</p>

<blockquote>
  <p>如果你还是不想到处找种子，或者说网上搜到的磁力链接都是死链，无法下载，那么继续看下面。</p>
</blockquote>

<h4 id="设置-qbittorrent-的-jackett-搜索插件">设置 qBittorrent 的 Jackett 搜索插件</h4>

<p>该插件可以直接在 qBittorrent 中调用 Jackett 服务搜索资源然后右键下载，如下：</p>

<p caption="Image"><img src="https://static.xheldon.cn/img/in-post/2022/the-way-to-watching-tv/D10C0DCC-31AB-405D-B7E9-8FEA68D23414_2.webp" alt="Image" title="Image" /></p>

<p>但是这并不是默认配置（好像如果直接下载 qBittorrent 的 Win 或者 Mac 客户端，Jackett 搜索插件是默认启用的，但是路由器没有带任何默认插件），需要单独安装，步骤如下，直接看图：</p>

<p caption="Image"><img src="https://static.xheldon.cn/img/in-post/2022/the-way-to-watching-tv/0C025BE5-98C1-4260-9F38-C0AB79199FD5_2.webp" alt="Image" title="Image" /></p>

<p>点击安装新插件后，会让你输入一个地址，该地址可以从 <a href="https://github.com/qbittorrent/search-plugins/wiki/How-to-configure-Jackett-plugin">这里获取</a> ，或者直接填写这个地址也行，都一样： https://raw.githubusercontent.com/qbittorrent/search-plugins/master/nova3/engines/jackett.py</p>

<p>之后就会在已安装的搜索插件中出现该插件的列表。</p>

<blockquote>
  <p>注：上述安装只是安装了 qBittorrent 的 Jackett 插件，以让 qBittorrent 配合 Jackett 使用，好比是 Safari 安装了迅雷插件一样，此时还不能使用，还要安装迅雷软件本身，Jackett 插件也是一样，只装插件是不行的，还要装 Jackett 服务才行。</p>
</blockquote>

<h4 id="安装-jackett-服务">安装 Jackett 服务</h4>

<p>在路由器上直接装 Jackett 这一步我没搞定，总是报错，应该是缺少某个环境配置，最后也不想搞了，因为我会使用 <a href="https://baike.baidu.com/item/Docker">Docker</a> 在 Mac 本地，因此我将这一步放到了 Mac 本地，只需要配置一下 qBittorrent 的 Jackett 插件即可。</p>

<p>Docker 可以在官网<a href="https://www.docker.com/get-started/#"> 这里下载</a>，下载后可以在终端命令行输入 <code class="language-plaintext highlighter-rouge">docker</code> 测试是否环境变量安装成功。</p>

<p>在 Docker 中安装 Jackett 很简单，步骤在官方的 <a href="https://github.com/Jackett/Jackett#installation-using-docker">这个地方</a>，这里简述一下即可：</p>

<p>打开终端，复制在官方的安装步骤中的 docker cli 代码：</p>

<pre><code class="language-Bash">docker run -d \
  --name=jackett \
  -e PUID=1000 \
  -e PGID=1000 \
  -e TZ=Asia/Shanghai \
  -e AUTO_UPDATE=true `#optional` \
  -p 9117:9117 \
  -v &lt;本地硬盘路径（去掉本句左右两侧尖括号）&gt;:/config \
  -v &lt;本地硬盘路径（去掉本句左右两侧尖括号）&gt;:/downloads \
  --restart unless-stopped \
  lscr.io/linuxserver/jackett
</code></pre>

<p>比如上面的配置，我的本地硬盘路径就是 <code class="language-plaintext highlighter-rouge">~/Code/Docker/config</code> 和 <code class="language-plaintext highlighter-rouge">~/Code/Docker/downloads</code> 。这个配置简单解释一下就是，映射本机端口 9117 到 Docker 容器的 9117 端口，启用自动更新，禁止重启停止除非已经意外停止。</p>

<p>之后就可以在 Docker 中看到这个服务了（默认直接启动了）：</p>

<p caption="Image"><img src="https://static.xheldon.cn/img/in-post/2022/the-way-to-watching-tv/5CD0C81A-15D4-46F6-B174-C158A782675D_2.webp" alt="Image" title="Image" /></p>

<p>然后在浏览器访问该地址： <code class="language-plaintext highlighter-rouge">127.0.0.1:9117</code> （或者如下图访问本机局域网 ip 也行，是一样的）即可看到 Jackett 的 Web 配置页面：</p>

<p caption="Image"><img src="https://static.xheldon.cn/img/in-post/2022/the-way-to-watching-tv/6DAB50B8-BBFC-442C-A707-D7E2E542808E_2.webp" alt="Image" title="Image" /></p>

<p>这里记住这个 API Key，下一步会用到，接下来配置 qBittorrent 中的 Jackett。</p>

<p>因为 Jackett 是安装在本地的，因此如果想让安装在路由器的 qBittorrent 的插件能够访问安装在本地的 Jackett，需要知道本机的局域网 ip，可以在系统设置中查看：</p>

<p caption="Image"><img src="https://static.xheldon.cn/img/in-post/2022/the-way-to-watching-tv/13072C1C-51B3-4AA2-94AA-7F6380094D6A_2.webp" alt="Image" title="Image" /></p>

<p>之后，在 Finder 中打开 qBittorrent 的配置目录（还记得刚才设置 qBittorrent 的配置目录吗？我们存放在了软路由外接硬盘中），Finder 路径是 <code class="language-plaintext highlighter-rouge">config/qBittorrent/data/nova3/engines/jackett.json</code>设置该地址和端口：</p>

<p caption="Image"><img src="https://static.xheldon.cn/img/in-post/2022/the-way-to-watching-tv/7B4A1D7C-6A2F-44C4-A486-4839C7604284_2.webp" alt="Image" title="Image" /></p>

<p>然后刷新 qBittorrent 的页面，打开插件设置，就可以看到该地址和该插件已经配置成功了：</p>

<p caption="Image"><img src="https://static.xheldon.cn/img/in-post/2022/the-way-to-watching-tv/5EA4A29E-0CD0-4ED6-9AAA-43BF96F70307_2.webp" alt="Image" title="Image" /></p>

<p>至此配置完毕。</p>

<blockquote>
  <p>注：配置完 Jackett 后，还要在 Jackett 服务中添加 Indexer ，让 Jackett 知道从哪些网站搜索种子，这个过程比较简单，如下：</p>
</blockquote>

<p>点击 Add Indexer 然后从弹出来的界面，右侧点击 + 即可，我是将所有类型是 Public 的同时语言是中文或者英文的站点都加入了（加入后这个待加入列表就不显示已经加入后的了，所以截图中很少有中文、英文和 Public 的站点）。Private 的需要会员 cookie：</p>

<p caption="Image"><img src="https://static.xheldon.cn/img/in-post/2022/the-way-to-watching-tv/9643CEC0-1D25-4931-8411-B37EB09F96FF_2.webp" alt="Image" title="Image" /></p>

<p caption="Image"><img src="https://static.xheldon.cn/img/in-post/2022/the-way-to-watching-tv/35B84985-B043-4FD8-B153-45DD8F75EDA8_2.webp" alt="Image" title="Image" /></p>

<p>Categories 顾名思义就是网站资源类型，其中 XXX 是 你懂的，不过这种资源下载的人比较少，所以比较难用 BT 下载到，因为 BT 的原理是下载的人越多，下载越快。</p>

<p>另外因为一些历史原因，国内的资源很少，而国外的资源无论多旧，总是很多且很快，哎，大环境下我们每个人都有责任，这里不多说。</p>

<p>比如下载一个旧的两年前的国产电影《疯狂的外星人》：</p>

<p caption="SCR-20220421-x9x"><img src="https://static.xheldon.cn/img/in-post/2022/the-way-to-watching-tv/6F54A106-42DB-40AB-A8D9-A9DD5A7E5F66_2.webp" alt="SCR-20220421-x9x" title="SCR-20220421-x9x" /></p>

<p>做种和资源都很少，但是下载一个十几年前的国外电影 Harry Potter 却很多：</p>

<p caption="SCR-20220421-x8k"><img src="https://static.xheldon.cn/img/in-post/2022/the-way-to-watching-tv/3A378FA4-66BD-474D-A38B-CA2DF8FA6CE8_2.webp" alt="SCR-20220421-x8k" title="SCR-20220421-x8k" /></p>

<p caption="WechatIMG29"><img src="https://static.xheldon.cn/img/in-post/2022/the-way-to-watching-tv/8DB69130-0789-43E4-B192-BB8E73DA74B7_2.webp" alt="WechatIMG29" title="WechatIMG29" /></p>

<p>至此路由器端配置结束，接下来就是最后一步，在播放端如 Infuse 中添加软路由外接硬盘，观看上面的电影了。</p>

<h4 id="配置-infuse">配置 Infuse</h4>

<p>这一个步骤就比较简单了，用的还是刚才的配置 WebDAV 的那个方式，只是这次把 WebDAV 协议换成了 SMB 协议，直接上图：</p>

<p caption="Image"><img src="https://static.xheldon.cn/img/in-post/2022/the-way-to-watching-tv/A467446C-B096-4ADD-B14E-E6454425FA34_2.webp" alt="Image" title="Image" /></p>

<p>其中 <code class="language-plaintext highlighter-rouge">位址</code> 就是软路由地址，我的就是 <code class="language-plaintext highlighter-rouge">192.168.7.2</code>. 端口默认 445 即可。</p>

<p>下面是效果图：</p>

<p caption="Image"><img src="https://static.xheldon.cn/img/in-post/2022/the-way-to-watching-tv/DA2FBBEA-E138-4BD0-A330-4F3C17A98AFD_2.webp" alt="Image" title="Image" /></p>

<p caption="压缩2"><img src="https://static.xheldon.cn/img/in-post/2022/the-way-to-watching-tv/1A6CBC88-BD46-4F11-8058-E7B41ABD4644_2.webp" alt="压缩2" title="压缩2" /></p>

<h2 id="测试">测试</h2>

<p>试试阿里云盘的网速测试：</p>

<p caption="Image"><img src="https://static.xheldon.cn/img/in-post/2022/the-way-to-watching-tv/1BC91F6C-490D-4F64-9B97-7CEFE566C169_2.webp" alt="Image" title="Image" /></p>

<p>试试软路由外接硬盘的网速测试：</p>

<p caption="Image"><img src="https://static.xheldon.cn/img/in-post/2022/the-way-to-watching-tv/5EC99DBA-D277-4FC4-9F36-CA1B0ADCF42D_2.webp" alt="Image" title="Image" /></p>

<p>本地外接硬盘（走的是局域网）还没有远端挂载阿里云盘（走的是 HTTP）的速度快的原因是，SMB 有速度限制。</p>

<h2 id="后话">后话</h2>

<p>电子产品或者软件的目标应该是以人为中心进行服务的，而不是让人来适应软件。这也是 MacOS 口碑比 Windows 好的原因。我相信没有人愿意每天折腾这些东西，谁都想有一个开箱即用的电视、电视盒子、电视软件，但现实的种种使我们无法做到省心，此时不要怕麻烦，为了哪些不会折腾的人而折腾（比如家人），给他们提供一种开箱即用的电视、电视盒子、电视软件，也是一种幸福。</p>

<p>祝大家都能观影自由！</p>

                <div class="text-danger">- EOF -</div>
                <hr style="visibility: hidden;">
                <ul class="pager">
                    
                    <li class="previous">
                        <a href="/life/dou-jiao-men-mian.html" data-toggle="tooltip" data-placement="top" title="豆角焖面">
                        上一篇<br>
                        <span>豆角焖面</span>
                        </a>
                    </li>
                    
                    
                    <li class="next">
                        <a href="/tech/applescript-simple-use.html" data-toggle="tooltip" data-placement="top" title="AppleScript 初体验">
                        下一篇<br>
                        <span>AppleScript 初体验</span>
                        </a>
                    </li>
                    
                </ul>
                <hr style="visibility: hidden;">
                <div id="gitalk-container"></div>
                <hr>
            </div>  

    <!-- Side Catalog Container -->
        
            <div class="
                col-lg-2 col-lg-offset-0
                visible-lg-block
                sidebar-container
                catalog-container">
                <div class="side-catalog">
                    <hr class="hidden-sm hidden-xs">
                    <h5>
                        <a class="catalog-toggle" href="#">目录</a>
                    </h5>
                    <ul class="catalog-body"></ul>
                </div>
            </div>
        

    <!-- Sidebar Container -->
            <div class="
                col-lg-8 col-lg-offset-2
                col-md-10 col-md-offset-1
                sidebar-container">

                <!-- Featured Tags -->
                


<section style="margin-bottom: 20px;">
    <h5><a href="/archive/">热门标签</a></h5>
    <div class="tags">
        
        
        
        
        
        
                <a data-sort="0021" 
                    href="/archive/?tag=%E6%8A%80%E6%9C%AF"
                    title="技术"
                    rel="41">技术</a>
        
                <a data-sort="0044" 
                    href="/archive/?tag=%E7%94%9F%E6%B4%BB"
                    title="生活"
                    rel="18">生活</a>
        
                <a data-sort="0056" 
                    href="/archive/?tag=%E7%BF%BB%E8%AF%91"
                    title="翻译"
                    rel="6">翻译</a>
        
                <a data-sort="0057" 
                    href="/archive/?tag=%E7%BE%8E%E9%A3%9F"
                    title="美食"
                    rel="5">美食</a>
        
                <a data-sort="0057" 
                    href="/archive/?tag=ProseMirror"
                    title="ProseMirror"
                    rel="5">ProseMirror</a>
        
                <a data-sort="0058" 
                    href="/archive/?tag=%E6%8A%98%E8%85%BE"
                    title="折腾"
                    rel="4">折腾</a>
        
                <a data-sort="0058" 
                    href="/archive/?tag=%E9%9A%8F%E7%AC%94"
                    title="随笔"
                    rel="4">随笔</a>
        
                <a data-sort="0058" 
                    href="/archive/?tag=Craft"
                    title="Craft"
                    rel="4">Craft</a>
        
                <a data-sort="0058" 
                    href="/archive/?tag=Vue"
                    title="Vue"
                    rel="4">Vue</a>
        
                <a data-sort="0059" 
                    href="/archive/?tag=%E6%8F%92%E4%BB%B6"
                    title="插件"
                    rel="3">插件</a>
        
                <a data-sort="0059" 
                    href="/archive/?tag=%E6%9C%8D%E5%8A%A1%E5%99%A8"
                    title="服务器"
                    rel="3">服务器</a>
        
                <a data-sort="0059" 
                    href="/archive/?tag=%E9%9B%86%E6%88%90"
                    title="集成"
                    rel="3">集成</a>
        
                <a data-sort="0059" 
                    href="/archive/?tag=Git"
                    title="Git"
                    rel="3">Git</a>
        
                <a data-sort="0060" 
                    href="/archive/?tag=%E4%B8%BB%E9%A3%9F"
                    title="主食"
                    rel="2">主食</a>
        
                <a data-sort="0060" 
                    href="/archive/?tag=%E4%BC%98%E5%8C%96"
                    title="优化"
                    rel="2">优化</a>
        
                <a data-sort="0060" 
                    href="/archive/?tag=%E6%8A%80%E5%B7%A7"
                    title="技巧"
                    rel="2">技巧</a>
        
                <a data-sort="0060" 
                    href="/archive/?tag=%E6%B5%8B%E8%AF%95"
                    title="测试"
                    rel="2">测试</a>
        
                <a data-sort="0060" 
                    href="/archive/?tag=%E7%BC%96%E8%BE%91%E5%99%A8"
                    title="编辑器"
                    rel="2">编辑器</a>
        
                <a data-sort="0060" 
                    href="/archive/?tag=%E7%BD%91%E7%BB%9C"
                    title="网络"
                    rel="2">网络</a>
        
                <a data-sort="0060" 
                    href="/archive/?tag=%E8%B0%83%E8%AF%95"
                    title="调试"
                    rel="2">调试</a>
        
                <a data-sort="0060" 
                    href="/archive/?tag=%E8%BD%AF%E8%B7%AF%E7%94%B1"
                    title="软路由"
                    rel="2">软路由</a>
        
                <a data-sort="0060" 
                    href="/archive/?tag=%E8%BF%81%E7%A7%BB"
                    title="迁移"
                    rel="2">迁移</a>
        
                <a data-sort="0060" 
                    href="/archive/?tag=Apple"
                    title="Apple"
                    rel="2">Apple</a>
        
                <a data-sort="0060" 
                    href="/archive/?tag=AppleScript"
                    title="AppleScript"
                    rel="2">AppleScript</a>
        
                <a data-sort="0060" 
                    href="/archive/?tag=CI"
                    title="CI"
                    rel="2">CI</a>
        
                <a data-sort="0060" 
                    href="/archive/?tag=GitHub"
                    title="GitHub"
                    rel="2">GitHub</a>
        
                <a data-sort="0060" 
                    href="/archive/?tag=JavaScript"
                    title="JavaScript"
                    rel="2">JavaScript</a>
    </div>
    <hr>
    <h5>专栏</h5>
    <div class="tags">
        <a href="/projects">开源项目</a>
        <a href="/book-list">技术书单</a>
        <a href="/subscribe">订阅&付费软件</a>
        <a href="/my-food">美食推荐</a>
    </div>
</section>


                <!-- Friends Blog -->
                
<hr>
<h5>朋友们</h5>
<ul class="list-inline">
  
  <li><a href="https://prosemirror.xheldon.com" target="_blank">ProseMirror 中文</a></li>
  
  <li><a href="https://slate.xheldon.com" target="_blank">Slate 中文</a></li>
  
  
    <li><a href="https://www.xheldon.cn" target="_blank">国内版</a></li>
  
</ul>

            </div>
        </div>
    </div>
</article>

<!-- add support for mathjax by voleking-->


<!-- Markdown 流程图按需加载 -->


<!-- Gitalk 评论 start  -->
<link rel="stylesheet" href="//static.xheldon.cn/css/gitalk.css">
<script src="//static.xheldon.cn/js/gitalk.min.js"></script>
<script type="text/javascript">
  window.addEventListener('load', function(){
    var gitalk = new Gitalk({
      clientID: 'd2b353a60fa1233163fc',
      clientSecret: '8091d57674976bcd60fc05261bf93c00da7e5ff4',
      repo: 'x_blog',
      owner: 'Xheldon',
      admin: ['Xheldon'],id: "the-way-to-watching-tv",labels: [],
      title: "我的家庭观影之路",
      language: "zh-CN",
      pagerDirection: 'first',
    });
    gitalk.render('gitalk-container');
});
</script>
<!-- Gitalk end -->


<!-- async load function -->
<script>
    function async(u, c) {
      var d = document, t = 'script',
          o = d.createElement(t),
          s = d.getElementsByTagName(t)[0];
      o.src = u;
      if (c) { o.addEventListener('load', function (e) { c(null, e); }, false); }
      s.parentNode.insertBefore(o, s);
    }
</script>
<!-- anchor-js, Doc:http://bryanbraun.github.io/anchorjs/ -->
<script>
    async("https://static.xheldon.cn/js/anchor.min.js",function(){
        anchors.options = {
          visible: 'hover',
          placement: 'right',
          // icon: '#'
        };
        anchors.add().remove('.intro-header h1').remove('.subheading').remove('.sidebar-container h5');
    })
</script>
<style>
    /* place left on bigger screen */
    @media all and (min-width: 800px) {
        .anchorjs-link{
            position: absolute;
            left: -0.75em;
            font-size: 1.1em;
            margin-top : -0.1em;
        }
    }
</style>



    <!-- Footer -->
<footer>
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <!-- SNS Link -->
                


<ul class="list-inline text-center">


  
  <li>
    <a target="_blank" href="/feed.xml">
      <span class="fa-stack fa-lg">
        <i class="fa fa-circle fa-stack-2x"></i>
        <i class="fa fa-rss fa-stack-1x fa-inverse"></i>
      </span>
    </a>
  </li>
  
  
  <li>
    <a target="_blank" href="https://twitter.com/_xheldon">
      <span class="fa-stack fa-lg">
        <i class="fa fa-circle fa-stack-2x"></i>
        <i class="fa fa-twitter fa-stack-1x fa-inverse"></i>
      </span>
    </a>
  </li>
  
  
  
  <li>
    <a target="_blank" href="http://weibo.com/xheldon">
      <span class="fa-stack fa-lg">
        <i class="fa fa-circle fa-stack-2x"></i>
        <i class="fa fa-weibo fa-stack-1x fa-inverse"></i>
      </span>
    </a>
  </li>
  
  
  
  <li>
    <a target="_blank" href="https://github.com/xheldon">
      <span class="fa-stack fa-lg">
        <i class="fa fa-circle fa-stack-2x"></i>
        <i class="fa fa-github fa-stack-1x fa-inverse"></i>
      </span>
    </a>
  </li>
  
  
  
  <li>
    <a target="_blank" href="https://t.me/xheldon_tech">
      <span class="fa-stack fa-lg">
        <i class="fa fa-circle fa-stack-2x"></i>
        <i class="fa fa-plane fa-stack-1x fa-inverse"></i>
      </span>
    </a>
  </li>
  
</ul>
                <p class="copyright text-muted">
                    Copyright &copy; <a href="https://github.com/Xheldon" target="_blank">Xheldon</a> 2023
                    <br>
                    Don't Panic | Theme fork from <a href="https://github.com/Huxpro/huxpro.github.io" target="_blank">Hux</a>
                    <br>
                    
                </p>
            </div>
            <div class="switch-mode" id="dark-mode">
                <span class="fa-stack fa-lg">
                    <i class="fa fa-circle fa-stack-2x fa-inverse"></i>
                    <i class="fa fa-moon-o fa-stack-1x"></i>
                  </span>
            </div>
            <div class="switch-mode" id="light-mode">
                <span class="fa-stack fa-lg">
                    <i class="fa fa-circle fa-stack-2x"></i>
                    <i class="fa fa-sun-o fa-stack-1x fa-inverse"></i>
                  </span>
            </div>
        </div>
    </div>
</footer>
<script>
    if (window.matchMedia('(prefers-color-scheme)').media === 'not all') {
        console.log('浏览器不支持主题色');
    } else {
        if(window.matchMedia('(prefers-color-scheme: dark)').matches){
            document.documentElement.classList.remove('light');
            document.documentElement.classList.add('dark');
            // Note: 推特列表添加暗黑主题
            let ttl = document.querySelector('.twitter-timeline');
            if (ttl) {
                ttl.setAttribute('data-theme', 'dark');
            }
        }
        if(window.matchMedia('(prefers-color-scheme: light)').matches){
            document.documentElement.classList.remove('dark');
            document.documentElement.classList.add('light');
            let ttl = document.querySelector('.twitter-timeline');
            if (ttl) {
                ttl.removeAttribute('data-theme');
            }
        }
        document.getElementById('dark-mode').addEventListener('click', function() {
            document.documentElement.classList.remove('light');
            document.documentElement.classList.add('dark');
        });
        document.getElementById('light-mode').addEventListener('click', function() {
            document.documentElement.classList.add('light');
            document.documentElement.classList.remove('dark');
        });
        // Note: 自动切换
        window.matchMedia('(prefers-color-scheme: dark)').addListener(function(mediaQueryList) {
            if (mediaQueryList.matches) {
                document.documentElement.classList.add('dark');
                document.documentElement.classList.remove('light');
            }
        })
        window.matchMedia('(prefers-color-scheme: light)').addListener(function(mediaQueryList) {
            if (mediaQueryList.matches) {
                document.documentElement.classList.add('light');
                document.documentElement.classList.remove('dark');
            }
        })
    }
</script>
<!-- jQuery -->
<script src="https://static.xheldon.cn/js/jquery.min.js "></script>

<!-- Bootstrap Core JavaScript -->
<!-- Currently, only navbar scroll-down effect at desktop still depends on this -->
<script src="https://static.xheldon.cn/js/bootstrap.min.js "></script>

<!-- Custom Theme JavaScript -->
<script src="https://static.xheldon.cn/js/xheldon-life-blog.min.js?202110012319"></script>

<!-- Simple Jekyll Search -->
<script src="https://static.xheldon.cn/js/simple-jekyll-search.min.js"></script>

<!-- Service Worker -->

<script src="https://static.xheldon.cn/js/snackbar.js "></script>
<script src="https://static.xheldon.cn/js/sw-registration.js "></script>


<!-- async load function -->
<script>
    function async(u, c) {
        var d = document, t = 'script',
            o = d.createElement(t),
            s = d.getElementsByTagName(t)[0];
        o.src = u;
        if (c) { o.addEventListener('load', function (e) { c(null, e); }, false); }
        s.parentNode.insertBefore(o, s);
    }
</script>






<!--fastClick.js -->
<script>
    async("https://static.xheldon.cn/js/fastclick.min.js", function () {
        var $nav = document.querySelector("nav");
        if ($nav) FastClick.attach($nav);
    })
</script>


<!-- Google Analytics -->

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-79359216-1"></script>
<script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-79359216-1');
</script>


<!-- Side Catalog -->

<script type="text/javascript">
    function generateCatalog(selector) {

        // interop with multilangual 
        if ('' == 'true') {
            _containerSelector = 'div.post-container.active'
        } else {
            _containerSelector = 'div.post-container'
        }

        // init
        var P = $(_containerSelector), a, n, t, l, i, c;
        a = P.find('h1,h2,h3,h4,h5,h6');

        // clean
        $(selector).html('')

        // appending
        a.each(function () {
            n = $(this).prop('tagName').toLowerCase();
            i = "#" + $(this).prop('id');
            t = $(this).text();
            c = $('<a href="' + i + '" rel="nofollow">' + t + '</a>');
            l = $('<li class="' + n + '_nav"></li>').append(c);
            $(selector).append(l);
        });
        return true;
    }

    generateCatalog(".catalog-body");

    // toggle side catalog
    $(".catalog-toggle").click((function (e) {
        e.preventDefault();
        $('.side-catalog').toggleClass("fold")
    }))

    /*
     * Doc: https://github.com/davist11/jQuery-One-Page-Nav
     * Fork by Hux to support padding
     */
    async("https://static.xheldon.cn/js/jquery.nav.js", function () {
        $('.catalog-body').onePageNav({
            currentClass: "active",
            changeHash: !1,
            easing: "swing",
            filter: "",
            scrollSpeed: 700,
            scrollOffset: 0,
            scrollThreshold: .2,
            begin: null,
            end: null,
            scrollChange: null,
            padding: 80
        });
    });
</script>



<!-- Multi-Lingual -->


<!-- Simple Jekyll Search -->
<script>
    // https://stackoverflow.com/questions/1912501/unescape-html-entities-in-javascript
    function htmlDecode(input) {
        var e = document.createElement('textarea');
        e.innerHTML = input;
        // handle case of empty input
        return e.childNodes.length === 0 ? "" : e.childNodes[0].nodeValue;
    }

    SimpleJekyllSearch({
        searchInput: document.getElementById('search-input'),
        resultsContainer: document.getElementById('search-results'),
        json: '/search.json',
        searchResultTemplate: '<div class="post-preview item"><a href="{url}"><h2 class="post-title">{title}</h2><h3 class="post-subtitle">{subtitle}</h3><hr></a></div>',
        noResultsText: 'No results',
        limit: 50,
        fuzzy: false,
        // a hack to get escaped subtitle unescaped. for some reason, 
        // post.subtitle w/o escape filter nuke entire search.
        templateMiddleware: function (prop, value, template) {
            if (prop === 'subtitle' || prop === 'title') {
                if (value.indexOf("code")) {
                    return htmlDecode(value);
                } else {
                    return value;
                }
            }
        }
    });

    $(document).ready(function () {
        var $searchPage = $('.search-page');
        var $searchOpen = $('.search-icon');
        var $searchClose = $('.search-icon-close');
        var $searchInput = $('#search-input');
        var $body = $('body');

        $searchOpen.on('click', function (e) {
            e.preventDefault();
            $searchPage.toggleClass('search-active');
            var prevClasses = $body.attr('class') || '';
            setTimeout(function () {
                $body.addClass('no-scroll');
            }, 400)

            if ($searchPage.hasClass('search-active')) {
                $searchClose.on('click', function (e) {
                    e.preventDefault();
                    $searchPage.removeClass('search-active');
                    $body.attr('class', prevClasses);  // from closure 
                });
                $searchInput.focus();
            }
        });
    });
</script>


<!-- Image to hack wechat -->
<img src="/resources/img/icon_wechat.png" width="0" height="0" />
<!-- Migrate from head to bottom, no longer block render and still work -->

</body>

</html>
